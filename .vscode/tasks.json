{
    "version": "2.0.0",
    "inputs": [
        {
            "id": "backboneEnvironment",
            "type": "pickString",
            "description": "Pick a backbone environment for the business connector to run in.",
            "options": [
                {
                    "label": "Development",
                    "value": "dev"
                },
                {
                    "label": "Staging",
                    "value": "stage"
                },
                {
                    "label": "Production",
                    "value": "prod"
                }
            ],
            "default": "stage"
        },
        {
            "id": "enableSync",
            "type": "pickString",
            "description": "Enable Sync?",
            "options": [
                {
                    "label": "Yes",
                    "value": "true"
                },
                {
                    "label": "No",
                    "value": "false"
                }
            ],
            "default": "false"
        },
        {
            "id": "moreTasks",
            "type": "pickString",
            "description": "Select a task",
            "options": [
                {
                    "label": "Restart",
                    "value": "./.dev/scripts/restartContainers.sh"
                },
                {
                    "label": "Drop Databases",
                    "value": "./.dev/scripts/clearDb.ts"
                },
                {
                    "label": "Sync Connector 1",
                    "value": "./.dev/scripts/syncConnector1.sh"
                },
                {
                    "label": "Sync Connector 2",
                    "value": "./.dev/scripts/syncConnector2.sh"
                }
            ]
        }
    ],
    "tasks": [
        {
            "label": "Compile",
            "command": "npm run build:watch",
            "type": "shell",
            "isBackground": true,
            "presentation": {
                "reveal": "never",
                "focus": false
            },
            "runOptions": {
                "runOn": "folderOpen"
            }
        },
        {
            "label": "Clear",
            "command": "docker compose -f .dev/docker-compose.debug.yml -f .dev/docker-compose.debug.${input:backboneEnvironment}.yml down -v",
            "type": "shell",
            "isBackground": true,
            "presentation": {
                "reveal": "always"
            }
        },
        {
            "label": "Run 1",
            "command": "export SYNC_ENABLED=${input:enableSync} && docker compose -f .dev/docker-compose.debug.yml -f .dev/docker-compose.debug.${input:backboneEnvironment}.yml up bc-1",
            "type": "shell",
            "isBackground": true,
            "presentation": {
                "reveal": "always"
            }
        },
        {
            "label": "Run 2",
            "command": "export SYNC_ENABLED=${input:enableSync} && docker compose -f .dev/docker-compose.debug.yml -f .dev/docker-compose.debug.${input:backboneEnvironment}.yml up bc-1 bc-2",
            "type": "shell",
            "isBackground": true,
            "presentation": {
                "reveal": "always"
            }
        },
        {
            "label": "Tests",
            "command": "npm run test:local",
            "type": "shell",
            "presentation": {
                "reveal": "always"
            }
        },
        {
            "label": "More Tasks",
            "command": "${input:moreTasks}",
            "type": "shell",
            "presentation": {
                "reveal": "silent"
            }
        }
    ]
}
